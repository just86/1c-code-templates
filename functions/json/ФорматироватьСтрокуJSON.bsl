// Форматує рядок JSON із заданими параметрами форматування
//
// Параметри:
//  СтрокаJSON - Рядок - JSON для форматування
//  ПереносСтрокJSON - ПереносСтрокJSON - тип перенесення рядків
//  СимволыОтступа - Рядок - символи для відступу (за замовчуванням 4 пробіли)
//  ИспользоватьДвойныеКавычки - Булево - використовувати подвійні лапки (за замовчуванням Істина)
//  ЭкранированиеСимволов - Неопределено - екранування символів
//
// Повертає:
//  Рядок - відформатований JSON
//
Функция ФорматироватьСтрокуJSON(СтрокаJSON, ПереносСтрокJSON, СимволыОтступа = "    ", 
    ИспользоватьДвойныеКавычки = Истина, ЭкранированиеСимволов = Неопределено)
    
    // Читання JSON
    ЧтениеJSON = Новый ЧтениеJSON;
    ЧтениеJSON.УстановитьСтроку(СтрокаJSON);
    Структура = ПрочитатьJSON(ЧтениеJSON, Ложь);
    
    // Запис JSON з форматуванням
    ЗаписьJSON = Новый ЗаписьJSON;
    ПараметрыJSON = Новый ПараметрыЗаписиJSON(ПереносСтрокJSON, СимволыОтступа, 
        ИспользоватьДвойныеКавычки, ЭкранированиеСимволов);
    ЗаписьJSON.УстановитьСтроку(ПараметрыJSON);
    
    ЗаписатьJSON(ЗаписьJSON, Структура);
    
    СтрокаJSON = ЗаписьJSON.Закрыть();

    Возврат СтрокаJSON;
    
КонецФункции
